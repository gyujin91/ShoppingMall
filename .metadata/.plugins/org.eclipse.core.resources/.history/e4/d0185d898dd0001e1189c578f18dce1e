package com.shopping.service;

import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.shopping.dao.OrderDAO;
import com.shopping.dto.OrderDTO;

@Service
public class OrderServiceImpl implements OrderService {

	@Autowired
	OrderDAO orderDao;

//	@Override
//	public void insertOrder(OrderDTO dto) throws Exception {
//		orderDao.insertOrder(dto);
//	}
	
	 @Override
	    public List<Integer> insertOrders(List<OrderDTO> orderDTOs) throws Exception {
	        // 여러 주문을 한 번에 삽입하고, 삽입된 주문의 수를 반환받습니다.
	        int totalInserted = orderDao.insertOrders(orderDTOs);
	        
	        // DB에서 생성된 주문 번호를 가져오기 위해 새로운 리스트를 만듭니다.
	        List<Integer> orderNumbers = new ArrayList<>();
	        
	        // 생성된 주문 번호를 가져와 리스트에 추가합니다.
	        for (int i = 0; i < totalInserted; i++) {
	            int newOrderNumber = orderDao.getGeneratedOrderNumber();
	            orderNumbers.add(newOrderNumber);
	        }

	        return orderNumbers;
	    }

	@Override
	public List<OrderDTO> orderDetail(int order_no) throws Exception {
		return orderDao.orderDetail(order_no);
	}

	
}
